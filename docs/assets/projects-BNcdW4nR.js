import{c as I,V as M,d as L,e as V,a as g,L as b,M as j,C as F,S as O,W as x,A as R,s as A,R as N,E as q,G as P,b as T}from"./clickLink-Ds_vkaND.js";function W({camera:n,domElement:u,sceneRoot:p,screensByName:f,optionsByName:E={},defaultOptions:S={loop:!0,muted:!1,playsInline:!0,preload:"auto",crossOrigin:"anonymous"},toggleOnClick:k=!0}={}){if(!n)throw new Error("setupVideoScreens: camera is required");if(!u)throw new Error("setupVideoScreens: domElement is required");if(!p)throw new Error("setupVideoScreens: sceneRoot is required");if(!f)throw new Error("setupVideoScreens: screensByName is required");const w=new I,m=new M,l=[];function B(e,o){const t=document.createElement("video");return t.src=e,t.loop=!!o.loop,t.muted=!!o.muted,t.preload=o.preload??"auto",t.playsInline=!!o.playsInline,t.setAttribute("playsinline",""),t.setAttribute("webkit-playsinline",""),o.crossOrigin&&(t.crossOrigin=o.crossOrigin),t}function _(e,o,t){let r=null;t.playIconName&&(r=p.getObjectByName(t.playIconName)),r||(r=p.getObjectByName(`${e.name}_PLAY`)),r&&(r.visible=!0);const s=B(o,t),a=new L(s);a.flipY=!1,a.wrapS=V,a.colorSpace=g,a.minFilter=b,a.magFilter=b;const i=e.material?.clone?e.material.clone():new j;i.map=a,i.emissive=new F(16777215),i.emissiveIntensity=1,i.emissiveMap=a,i.needsUpdate=!0,e.material=i,l.push({mesh:e,video:s,texture:a,playIcon:r})}for(const[e,o]of Object.entries(f)){const t=p.getObjectByName(e);if(!t){console.warn(`[videoScreens] Mesh not found: "${e}"`);continue}const r={...S,...E[e]||{}};_(t,o,r)}function C(e){const o=u.getBoundingClientRect();m.x=(e.clientX-o.left)/o.width*2-1,m.y=-((e.clientY-o.top)/o.height*2-1)}function v(e){if(!k||l.length===0)return;C(e),w.setFromCamera(m,n);const o=l.map(i=>i.mesh),t=w.intersectObjects(o,!0);if(t.length===0)return;let r=t[0].object,s=null;for(;r&&!s;)s=l.find(i=>i.mesh===r),r=r.parent;if(!s)return;const a=s.video;a.paused?(a.play().catch(i=>console.warn("[videoScreens] play() blocked:",i)),s.playIcon&&(s.playIcon.visible=!1)):(a.pause(),s.playIcon&&(s.playIcon.visible=!0)),l.forEach(i=>{i!==s&&(i.video.pause(),i.playIcon&&(i.playIcon.visible=!0))})}return u.addEventListener("click",v),{screens:l,update(){},dispose(){u.removeEventListener("click",v),l.forEach(e=>{e.video.pause(),e.texture.dispose?.(),e.mesh.material?.dispose?.()}),l.length=0}}}const h=new O,c=new x({antialias:!0});c.setSize(window.innerWidth,window.innerHeight);c.outputColorSpace=g;c.toneMapping=R;c.toneMappingExposure=1;document.body.appendChild(c.domElement);c.setPixelRatio(Math.min(window.devicePixelRatio,2));const d=A(c,{minY:-5.5});new N().setPath("/assets/hdris/").load("room.hdr",n=>{n.mapping=q,h.environment=n});const G=new P;G.load("/assets/projects.glb",n=>{h.add(n.scene),T({camera:d,domElement:c.domElement,sceneRoot:n.scene,linksByName:{HomeButton:"./index.html",ProjectsButton:"./projects.html",ShadersButton:"./shaders.html",ArtButton:"./art.html",AboutButton:"./about.html",ContactButton:"./contact.html",door:"https://shreya6064.github.io/virtual-campus-demo/",bg_removal:"https://github.com/shreya6064/remove-background",b42d:"https://github.com/shreya6064/b42d",makespace:"https://github.com/shreya6064/make-space",globalbevel:"https://github.com/shreya6064/global-bevel",textnodes:"",originsetter:"https://github.com/shreya6064/origin-setter",devpost_swiftstep:"https://devpost.com/software/swift-step",devpost_halostream:"https://devpost.com/software/holostream"}}),W({camera:d,domElement:c.domElement,sceneRoot:n.scene,screensByName:{prativerse_TV:"./videos/3d_virtual_campus_demo.mp4",traffic_sim:"./videos/traffic_sim.mp4",ufos:"./videos/ufos.mp4",poster_maker:"./videos/poster_maker.mp4"},optionsByName:{prativerse_TV:{loop:!0,muted:!0},traffic_sim:{loop:!0,muted:!0},ufos:{loop:!0,muted:!0},poster_maker:{loop:!0,muted:!0}}})},n=>console.log(`Loading: ${(n.loaded/n.total*100).toFixed(0)}%`),n=>console.error(n));window.addEventListener("resize",()=>{d.aspect=window.innerWidth/window.innerHeight,d.updateProjectionMatrix(),c.setSize(window.innerWidth,window.innerHeight)});function y(){requestAnimationFrame(y),d.updateFreeOrbitCamera(),c.render(h,d)}y();
