import{e as L,V as M,f as O,g as V,b as y,L as b,M as j,C as F,c as R,a as x,S as A,W as N,A as q,s as G,R as P,E as T,G as W,d as H}from"./loadingManager-BFkCW6DZ.js";function Y({camera:r,domElement:u,sceneRoot:p,screensByName:g,optionsByName:S={},defaultOptions:k={loop:!0,muted:!1,playsInline:!0,preload:"auto",crossOrigin:"anonymous"},toggleOnClick:B=!0}={}){if(!r)throw new Error("setupVideoScreens: camera is required");if(!u)throw new Error("setupVideoScreens: domElement is required");if(!p)throw new Error("setupVideoScreens: sceneRoot is required");if(!g)throw new Error("setupVideoScreens: screensByName is required");const w=new L,m=new M,l=[];function _(e,o){const t=document.createElement("video");return t.src=e,t.loop=!!o.loop,t.muted=!!o.muted,t.preload=o.preload??"auto",t.playsInline=!!o.playsInline,t.setAttribute("playsinline",""),t.setAttribute("webkit-playsinline",""),o.crossOrigin&&(t.crossOrigin=o.crossOrigin),t}function C(e,o,t){let i=null;t.playIconName&&(i=p.getObjectByName(t.playIconName)),i||(i=p.getObjectByName(`${e.name}_PLAY`)),i&&(i.visible=!0);const a=_(o,t),s=new O(a);s.flipY=!1,s.wrapS=V,s.colorSpace=y,s.minFilter=b,s.magFilter=b;const n=e.material?.clone?e.material.clone():new j;n.map=s,n.emissive=new F(16777215),n.emissiveIntensity=1,n.emissiveMap=s,n.needsUpdate=!0,e.material=n,l.push({mesh:e,video:a,texture:s,playIcon:i})}for(const[e,o]of Object.entries(g)){const t=p.getObjectByName(e);if(!t){console.warn(`[videoScreens] Mesh not found: "${e}"`);continue}const i={...k,...S[e]||{}};C(t,o,i)}function I(e){const o=u.getBoundingClientRect();m.x=(e.clientX-o.left)/o.width*2-1,m.y=-((e.clientY-o.top)/o.height*2-1)}function v(e){if(!B||l.length===0)return;I(e),w.setFromCamera(m,r);const o=l.map(n=>n.mesh),t=w.intersectObjects(o,!0);if(t.length===0)return;let i=t[0].object,a=null;for(;i&&!a;)a=l.find(n=>n.mesh===i),i=i.parent;if(!a)return;const s=a.video;s.paused?(s.play().catch(n=>console.warn("[videoScreens] play() blocked:",n)),a.playIcon&&(a.playIcon.visible=!1)):(s.pause(),a.playIcon&&(a.playIcon.visible=!0)),l.forEach(n=>{n!==a&&(n.video.pause(),n.playIcon&&(n.playIcon.visible=!0))})}return u.addEventListener("click",v),{screens:l,update(){},dispose(){u.removeEventListener("click",v),l.forEach(e=>{e.video.pause(),e.texture.dispose?.(),e.mesh.material?.dispose?.()}),l.length=0}}}const z=R(),h=x({overlayUI:z,onReady:()=>{}}),f=new A,c=new N({antialias:!0});c.setSize(window.innerWidth,window.innerHeight);c.outputColorSpace=y;c.toneMapping=q;c.toneMappingExposure=1;document.body.appendChild(c.domElement);c.setPixelRatio(Math.min(window.devicePixelRatio,2));const d=G(c,{minY:-6.5});new P(h.manager).setPath("/assets/hdris/").load("room.hdr",r=>{r.mapping=T,f.environment=r});const $=new W(h.manager);$.load("/assets/projects.glb",r=>{f.add(r.scene),H({camera:d,domElement:c.domElement,sceneRoot:r.scene,linksByName:{HomeButton:"./index.html",ProjectsButton:"./projects.html",ShadersButton:"./shaders.html",ArtButton:"./art.html",AboutButton:"./about.html",ContactButton:"./contact.html",door:"https://shreya6064.github.io/virtual-campus-demo/",bg_removal:"https://github.com/shreya6064/remove-background",b42d:"https://github.com/shreya6064/b42d",makespace:"https://github.com/shreya6064/make-space",globalbevel:"https://github.com/shreya6064/global-bevel",textnodes:"",originsetter:"https://github.com/shreya6064/origin-setter",devpost_swiftstep:"https://devpost.com/software/swift-step",devpost_halostream:"https://devpost.com/software/holostream"}}),Y({camera:d,domElement:c.domElement,sceneRoot:r.scene,screensByName:{prativerse_TV:"./videos/3d_virtual_campus_demo.mp4",traffic_sim:"./videos/traffic_sim.mp4",ufos:"./videos/ufos.mp4",poster_maker:"./videos/poster_maker.mp4"},optionsByName:{prativerse_TV:{loop:!0,muted:!0},traffic_sim:{loop:!0,muted:!0},ufos:{loop:!0,muted:!0},poster_maker:{loop:!0,muted:!0}}}),h.markGlbDone()},r=>console.log(`Loading: ${(r.loaded/r.total*100).toFixed(0)}%`),r=>console.error(r));window.addEventListener("resize",()=>{d.aspect=window.innerWidth/window.innerHeight,d.updateProjectionMatrix(),c.setSize(window.innerWidth,window.innerHeight)});function E(){requestAnimationFrame(E),d.updateFreeOrbitCamera(),c.render(f,d)}E();
