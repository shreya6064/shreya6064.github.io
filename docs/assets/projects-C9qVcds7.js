import{c as F,V as L,d as R,a as b,L as v,M as j,C as k,S as x,W as O,A,s as q,R as T,E as G,G as P,b as W}from"./clickLink-D7QZphy2.js";function _({camera:o,domElement:u,sceneRoot:h,screensByName:w,optionsByName:E={},defaultOptions:S={loop:!0,muted:!1,playsInline:!0,preload:"auto",crossOrigin:"anonymous"},toggleOnClick:B=!0}={}){if(!o)throw new Error("setupVideoScreens: camera is required");if(!u)throw new Error("setupVideoScreens: domElement is required");if(!h)throw new Error("setupVideoScreens: sceneRoot is required");if(!w)throw new Error("setupVideoScreens: screensByName is required");const f=new F,m=new L,c=[];function C(e,t){const n=document.createElement("video");return n.src=e,n.loop=!!t.loop,n.muted=!!t.muted,n.preload=t.preload??"auto",n.playsInline=!!t.playsInline,n.setAttribute("playsinline",""),n.setAttribute("webkit-playsinline",""),t.crossOrigin&&(n.crossOrigin=t.crossOrigin),n}function M(e,t,n){const a=C(t,n),i=new R(a);i.colorSpace=b,i.minFilter=v,i.magFilter=v;const s=e.material?.clone?e.material.clone():new j;s.map=i,s.emissive=new k(16777215),s.emissiveIntensity=1,s.emissiveMap=i,s.needsUpdate=!0,e.material=s,c.push({mesh:e,video:a,texture:i})}for(const[e,t]of Object.entries(w)){const n=h.getObjectByName(e);if(!n){console.warn(`[videoScreens] Mesh not found: "${e}"`);continue}const a={...S,...E[e]||{}};M(n,t,a)}function V(e){const t=u.getBoundingClientRect();m.x=(e.clientX-t.left)/t.width*2-1,m.y=-((e.clientY-t.top)/t.height*2-1)}function g(e){if(!B||c.length===0)return;V(e),f.setFromCamera(m,o);const t=c.map(l=>l.mesh),n=f.intersectObjects(t,!0);if(n.length===0)return;let a=n[0].object,i=null;for(;a&&!i;)i=c.find(l=>l.mesh===a),a=a.parent;if(!i)return;const s=i.video;s.paused?s.play().catch(l=>console.warn("[videoScreens] play() blocked:",l)):s.pause()}return u.addEventListener("click",g),{screens:c,update(){},dispose(){u.removeEventListener("click",g),c.forEach(e=>{e.video.pause(),e.texture.dispose?.(),e.mesh.material?.dispose?.()}),c.length=0}}}const p=new x,r=new O({antialias:!0});r.setSize(window.innerWidth,window.innerHeight);r.outputColorSpace=b;r.toneMapping=A;r.toneMappingExposure=1;document.body.appendChild(r.domElement);r.setPixelRatio(Math.min(window.devicePixelRatio,2));const d=q(r,{minY:-4});new T().setPath("/assets/hdris/").load("room.hdr",o=>{o.mapping=G,p.environment=o});const H=new P;H.load("/assets/projects.glb",o=>{p.add(o.scene),W({camera:d,domElement:r.domElement,sceneRoot:o.scene,linksByName:{HomeButton:"./index.html",ProjectsButton:"./projects.html",ShadersButton:"./shaders.html",ArtButton:"./art.html",AboutButton:"./about.html",ContactButton:"./contact.html",door:"https://shreya6064.github.io/virtual-campus-demo/"}}),_({camera:d,domElement:r.domElement,sceneRoot:o.scene,screensByName:{prativerse_TV:"./videos/3d_virtual_campus_demo.mp4"},optionsByName:{prativerse_TV:{loop:!0,muted:!0}}})},o=>console.log(`Loading: ${(o.loaded/o.total*100).toFixed(0)}%`),o=>console.error(o));window.addEventListener("resize",()=>{d.aspect=window.innerWidth/window.innerHeight,d.updateProjectionMatrix(),r.setSize(window.innerWidth,window.innerHeight)});function y(){requestAnimationFrame(y),d.updateFreeOrbitCamera(),r.render(p,d)}y();
